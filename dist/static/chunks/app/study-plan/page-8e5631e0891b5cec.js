(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{7148:(e,s,r)=>{Promise.resolve().then(r.bind(r,1357))},1357:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var n=r(5155),t=r(2115),a=r(4085),l=r(6046),i=r(4206);function d(){let e=(0,l.useRouter)(),[s,r]=(0,t.useState)(null),[d,o]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[h,m]=(0,t.useState)(null),[x,g]=(0,t.useState)(null);return(0,t.useEffect)(()=>{let e=localStorage.getItem("studyPlanRequest");if(!e){m("No request data found. Please complete the questionnaire first."),u(!1);return}g(JSON.parse(e)),(async()=>{try{let s=await fetch("/api/study-plan",{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!s.ok)throw Error("Error: ".concat(s.status," ").concat(s.statusText));let n=await s.json();r(n),"string"==typeof n&&o(function(e){let s=e.split(/\*\*(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday)([^*]+)\*\*/i),r=s[0].trim(),n=[];for(let e=1;e<s.length;e+=3)if(e+2<s.length){let r;let t=s[e],a=s[e+1],l=s[e+2],i=[],d=/(\d+)\.\s+Resource:?\s+"?([^"\n]+)"?\s+\*\s+Time Allocation:?\s+([^\n]+)\n\s+\*\s+Reason:?\s+([^\n]+)\n\s+\*\s+URL:?\s+([^\n]+)/g;for(;null!==(r=d.exec(l));)i.push({number:r[1],title:r[2],timeAllocation:r[3],reason:r[4],url:r[5]});if(0===i.length){let e=/\*\s+(\d+(?:\.\d+)?)\s+hours?:\s+([^\n]+)(?:\n|$)(?:Reason:\s+([^\n]+)(?:\n|$))?(?:URL:\s+([^\n]+)(?:\n|$))?/g;for(;null!==(r=e.exec(l));)i.push({number:i.length+1,title:r[2],timeAllocation:r[1]+" hours",reason:r[3]||"Not specified",url:r[4]||"#"})}if(0===i.length){let e=/\*\s+(\d+(?:\.\d+)?)\s+hours?:\s+([^\n]+)(?:\n|$)/g;for(;null!==(r=e.exec(l));)i.push({number:i.length+1,title:r[2],timeAllocation:r[1]+" hours",reason:"Not specified",url:"#"})}n.push({name:t,time:a.trim(),content:l,resources:i})}return{introduction:r,days:n}}(n))}catch(e){m(e instanceof Error?e.message:"An unknown error occurred"),console.error("Error fetching study plan:",e)}finally{u(!1)}})()},[]),(0,n.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Your Personalized Study Plan"}),x&&(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gray-100 dark:bg-gray-800 rounded-md",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Request Details"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Subject:"})," ",x.subject]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Level:"})," ",x.level]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Interests:"})," ",Array.isArray(x.interests)?x.interests.join(", "):x.interests]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Weekly Hours:"})," ",x.weekly_hours]})]}),c&&(0,n.jsxs)("div",{className:"text-center p-8",children:[(0,n.jsx)("div",{className:"animate-pulse text-xl",children:"Generating your personalized study plan..."}),(0,n.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"This may take a moment as we analyze resources and create your plan."})]}),h&&(0,n.jsxs)("div",{className:"p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded-md",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Error"}),(0,n.jsx)("p",{children:h}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(a.$,{onClick:()=>e.push("/questions"),children:"Return to Questionnaire"})})]}),s&&!c&&(0,n.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 border dark:border-gray-700 rounded-md shadow-sm",children:[(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Study Plan"}),d?d?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Introduction"}),(0,n.jsx)("div",{className:"prose dark:prose-invert",children:(0,n.jsx)(i.oz,{children:d.introduction})})]}),(0,n.jsx)("div",{className:"space-y-8",children:d.days.map((e,s)=>(0,n.jsxs)("div",{className:"border dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,n.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900 p-3",children:(0,n.jsxs)("h3",{className:"text-lg font-bold",children:[e.name," ",e.time]})}),(0,n.jsx)("div",{className:"p-4 space-y-4",children:e.resources&&e.resources.length>0?e.resources.map((e,s)=>(0,n.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md",children:[(0,n.jsxs)("h4",{className:"font-semibold text-lg mb-2",children:[e.number,". ",e.title]}),(0,n.jsxs)("ul",{className:"space-y-2 list-disc pl-5",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Time:"})," ",e.timeAllocation]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Reason:"})," ",e.reason]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("span",{className:"font-medium",children:"URL:"})," ",(0,n.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:e.url})]})]})]},s)):(0,n.jsxs)("div",{className:"p-4 text-gray-500 dark:text-gray-400",children:[(0,n.jsx)("p",{children:"No resources found for this day. Here's the raw content:"}),(0,n.jsx)("pre",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-900 rounded overflow-auto text-sm",children:e.content})]})})]},s))})]}):null:"string"==typeof s?(0,n.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(0,n.jsx)(i.oz,{children:s})}):(0,n.jsx)("pre",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-auto",children:JSON.stringify(s,null,2)})]}),(0,n.jsxs)("div",{className:"border-t dark:border-gray-700 p-4 flex justify-between",children:[(0,n.jsx)(a.$,{variant:"outline",onClick:()=>e.push("/questions"),children:"Back to Questionnaire"}),(0,n.jsx)(a.$,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>window.print(),children:"Print Study Plan"})]})]})]})}},4085:(e,s,r)=>{"use strict";r.d(s,{$:()=>o});var n=r(5155),t=r(2115),a=r(2317),l=r(1027),i=r(9602);let d=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,s)=>{let{className:r,variant:t,size:l,asChild:o=!1,...c}=e,u=o?a.DX:"button";return(0,n.jsx)(u,{className:(0,i.cn)(d({variant:t,size:l,className:r})),ref:s,...c})});o.displayName="Button"},9602:(e,s,r)=>{"use strict";r.d(s,{cn:()=>a});var n=r(3463),t=r(9795);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,n.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[345,185,441,517,358],()=>s(7148)),_N_E=e.O()}]);